{% extends "base.html" %}

{% block title %}Sign Up{% endblock %}

{% block content %}

<h2 class="form-title">CREATE AN ACCOUNT</h2>

<form method="post" class="auth-form" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- PROFILE SECTION -->
    <h2 class="section-title">Profile</h2>
    <div class="form-row">
        <div class="form-group">
            <input type="text" id="first_name" name="first_name" placeholder="" required>
            <label for="first_name">Firstname</label>
        </div>
        <div class="form-group">
            <input type="text" id="middle_name" name="middle_name" placeholder="">
            <label for="middle_name">Middlename</label>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group">
            <input type="text" id="last_name" name="last_name" placeholder="" required>
            <label for="last_name">Lastname</label>
        </div>
        <div class="form-group">
            <input type="text" id="contact" name="contact" placeholder="" required>
            <label for="contact">Contact</label>
        </div>
    </div>

    <!-- LOGIN SECTION -->
    <h2 class="section-title">Login</h2>
    <div class="form-row">
        <div class="form-group">
            <input type="text" id="username" name="username" placeholder="" required>
            <label for="username">Username</label>
        </div>
        <div class="form-group">
            <input type="password" id="password1" name="password1" placeholder="" required>
            <label for="password1">Password</label>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group">
            <input type="email" id="email" name="email" placeholder="" required>
            <label for="email">Valid Email</label>
        </div>
        <div class="form-group">
            <input type="password" id="password2" name="password2" placeholder="" required>
            <label for="password2">Confirm Password</label>
        </div>
    </div>

    <!-- ADDRESS SECTION -->
    <h2 class="section-title">Address</h2>
    <div class="form-row">
        <div class="form-group">
            <select id="barangay" name="barangay" required>
                <option value="" disabled selected>Choose Barangay</option>
                <option value="Labangon">Labangon</option>
                <option value="Mambaling">Mambaling</option>
            </select>
            <label for="barangay">Barangay</label>
        </div>
        <div class="form-group">
            <select id="sublocation" name="sublocation" required>
                <option value="" disabled selected>Select Sub-location</option>
            </select>
            <label for="sublocation">SubLocation</label>
        </div>
    </div>
    <div class="form-row">
        <div class="form-group">
            <input type="text" id="house_number" name="house_number" placeholder="" required>
            <label for="house_number">House No. / Street</label>
        </div>
        <div class="form-group">
            <select id="skills" name="skills" required>
                <option value="other" selected>Other</option>
                <option value="Haircut">Haircut</option>
                <option value="Plumbing">Plumbing</option>
                <option value="Electrical">Electrical</option>
                <option value="Carpentry">Carpentry</option>
                <option value="Cleaning">Cleaning</option>
                <option value="Cooking">Cooking</option>
                <option value="Driving">Driving</option>
                <option value="Babysitting">Babysitting</option>
                <option value="Elderly Care">Elderly Care</option>
                <option value="Tutoring">Tutoring</option>
                <option value="Pedicure">Pedicure</option>

            </select>
            <label for="skills">Skills</label>
        </div>
    </div>

    <!-- UPLOAD PHOTO -->
    <h2 class="section-title">Upload Photo</h2>
    <div class="form-row">
        <div class="form-group">
            <input type="file" id="proof_residency" name="proof_residency" accept="image/*,application/pdf" required>
            <label for="proof_residency">[Proof of Residency]</label>
        </div>
    </div>

    <button type="submit">Sign Up</button>
</form>
<br>
<p class="login-link" style="color: #ffffff; font-weight: bold; margin-top: 15px;">Already have an account?
<a href="{% url 'login' %}"style="color: #fbff03; font-weight: bold;">Login</a></p> 

<!-- Dependent Dropdown JS -->
<script>
    const sublocations = {
        Labangon: ["Tres de Abril", "Katipunan St.", "V. Rama Ave"],
        Mambaling: ["Tabada", "Sitio Caimito", "Sitio Manga"],
    };

    document.getElementById("barangay").addEventListener("change", function () {
        const barangay = this.value;
        const sublocationSelect = document.getElementById("sublocation");
        sublocationSelect.innerHTML = '<option value="" disabled selected>Select Sub-location</option>';
        if (barangay && sublocations[barangay]) {
            sublocations[barangay].forEach(loc => {
                const option = document.createElement("option");
                option.value = loc.toLowerCase().replace(/\s+/g, "_");
                option.textContent = loc;
                sublocationSelect.appendChild(option);
            });
        }
    });
</script>
{% endblock %}