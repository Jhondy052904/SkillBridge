{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="{% static 'css/global-font.css' %}?v=1">
    <link rel="stylesheet" href="{% static 'css/registration/signup.css' %}?v=2">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- Messages -->
{% if messages %}
  <div class="floating-messages">
    {% for message in messages %}
      <div class="editprofile-message {% if message.tags == 'success' %}success{% elif message.tags == 'error' %}error{% elif message.tags == 'warning' %}warning{% else %}info{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

<div class="signup-page">

    <button class="back-btn" onclick="window.location.href='/'">
    </i>↩ Back
    </button>
    
    <div class="signup-container">
        <h1 class="signup-title">SIGN UP</h1>

<form class="signup-form" enctype="multipart/form-data" method="post" action="{% url 'signup' %}">
    {% csrf_token %}

    <!-- Full Name -->
    <div class="form-row">
        <div class="form-group input-with-icon">
            <i class="fas fa-user input-icon"></i>
            <label for="first_name">Firstname</label>
            <input type="text" id="first_name" name="first_name" placeholder="Enter your firstname" required>
        </div>
        <div class="form-group input-with-icon">
            <i class="fas fa-user input-icon"></i>
            <label for="middle_name">Middlename</label>
            <input type="text" id="middle_name" name="middle_name" placeholder="Enter your middlename">
        </div>
    </div>

    <div class="form-row">
        <div class="form-group input-with-icon">
            <i class="fas fa-user input-icon"></i>
            <label for="last_name">Lastname</label>
            <input type="text" id="last_name" name="last_name" placeholder="Enter your lastname" required>
        </div>
        <div class="form-group input-with-icon">
            <i class="fas fa-phone input-icon"></i>
            <label for="contact">Contact</label>
            <input type="text" id="contact" name="contact" placeholder="Enter your contact" required>
        </div>
    </div>

    <!-- Login Info -->
    <div class="form-row">
        <!-- KEEP USERNAME FIELD -->
        <div class="form-group input-with-icon">
            <i class="fas fa-user input-icon"></i>
            <label for="username">Username</label>
            <input type="text" id="username" name="username" placeholder="Enter your username" required>
        </div>

        <!-- FIXED: Add correct EMAIL field -->
        <div class="form-group input-with-icon">
            <i class="fas fa-envelope input-icon"></i>
            <label for="email">Valid Email</label>
            <input type="email" id="email" name="email" placeholder="Enter your email" required>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group input-with-icon">
            <i class="fas fa-lock input-icon"></i>
            <label for="password">Password</label>
            <input type="password" id="password" name="password" placeholder="Enter your password" minlength="6" required>
        </div>

        <div class="form-group input-with-icon">
            <i class="fas fa-lock input-icon"></i>
            <label for="password2">Confirm Password</label>
            <input type="password" id="password2" name="password2" placeholder="Confirm your password" minlength="6" required>
        </div>
    </div>

    <!-- Address -->
    <div class="form-row">
        <div class="form-group input-with-icon">
            <i class="fas fa-map-marker-alt input-icon"></i>
            <label for="barangay">Barangay</label>
            <select id="barangay" name="barangay" required>
                <option value="">Choose Barangay</option>
                <option value="Labangon">Labangon</option>
                <option value="Mambaling">Mambaling</option>
            </select>
        </div>

        <div class="form-group input-with-icon">
            <i class="fas fa-map-marker-alt input-icon"></i>
            <label for="sublocation">Sub-location</label>
            <select id="sublocation" name="sublocation" required>
                <option value="Balaga">Balaga</option>
                <option value="Bliss">Bliss</option>
                <option value="Bon Ami">Bon Ami</option>
                <option value="Bonbonan Lower">Bonbonan Lower</option>
                <option value="Bonbonan Upper">Bonbonan Upper</option>
                <option value="Bugnay I">Bugnay I</option>
                <option value="Bugnay II">Bugnay II</option>
                <option value="Callejon">Callejon</option>
                <option value="Camalig">Camalig</option>
                <option value="Cogon Lower">Cogon Lower</option>
                <option value="Cogon Upper">Cogon Upper</option>
                <option value="Gamboa">Gamboa</option>
                <option value="Kalumboyan">Kalumboyan</option>
                <option value="Kamanggahan">Kamanggahan</option>
                <option value="Kapaculan">Kapaculan</option>
                <option value="Kolo">Kolo</option>
                <option value="Latresass">Latresass</option>
                <option value="Lower Banawa">Lower Banawa</option>
                <option value="Lutaw-Lutaw">Lutaw-Lutaw</option>
                <option value="Mahayahay">Mahayahay</option>
                <option value="Maria Paloma Village">Maria Paloma Village</option>
                <option value="Rosalina Village">Rosalina Village</option>
                <option value="San Isidro">San Isidro</option>
                <option value="Stage">Stage</option>
                <option value="Sta. Ana">Sta. Ana</option>
                <option value="Sto. Niño (A. Lopez)">Sto. Niño (A. Lopez)</option>
                <option value="Tambisan">Tambisan</option>
            </select>
        </div>
    </div>

    <div class="form-row">
        <div class="form-group input-with-icon">
            <i class="fas fa-home input-icon"></i>
            <label for="house_number">House No. / Street</label>
            <input type="text" id="house_number" name="house_number" placeholder="House No. / Street" required>
        </div>

        <div class="form-group input-with-icon">
            <i class="fas fa-briefcase input-icon"></i>
            <label for="skills">Skills</label>
            <select id="skills" name="skills" required>
                <option value="other" selected>Other</option>
                <option value="Haircut">Haircut</option>
                <option value="Plumbing">Plumbing</option>
                <option value="Electrical">Electrical</option>
                <option value="Carpentry">Carpentry</option>
                <option value="Cleaning">Cleaning</option>
                <option value="Cooking">Cooking</option>
                <option value="Driving">Driving</option>
                <option value="Babysitting">Babysitting</option>
                <option value="Elderly Care">Elderly Care</option>
                <option value="Tutoring">Tutoring</option>
                <option value="Pedicure">Pedicure</option>
            </select>
        </div>
    </div>

    <!-- Proof of Residency -->
    <div class="form-row">
        <div class="form-group input-with-icon">
            <i class="fas fa-upload input-icon"></i>
            <label for="proof_residency">[Proof of Residency]</label>
            <input type="file" id="proof_residency" name="proof_residency" accept="image/*,application/pdf" required>
        </div>
    </div>

    <!-- Submit -->
    <button type="submit" class="sign-up-btn">Create account</button>

    <!-- Divider & Sign In -->
    <div class="divider">ALREADY HAVE AN ACCOUNT?</div>
    <button type="button" class="create-account-btn" onclick="window.location.href='{% url 'login' %}'">Sign In</button>

</form>


    </div>
</div>
<script>
// Define sublocations for each barangay
const sublocations = {
    "Labangon": [
        "Villa Cristina",
        "West City Homes",
        "Woodberry Subdivision",
        "Santo Niño Village",
        "Labangon Heights",
        "San Antonio Compound",
        "Rosario Park",
        "Sitio Bliss"
    ],
    "Mambaling": [
        "Alumnus Street",
        "Avocado Street",
        "C Padilla Street",
        "San Jose Village",
        "Mambaling Heights",
        "Gulayon Compound",
        "Basak Extension"
    ]
};

// Get dropdown elements
const barangaySelect = document.getElementById('barangay');
const sublocationSelect = document.getElementById('sublocation');

barangaySelect.addEventListener('change', function() {
    const barangay = this.value;

    // Clear existing options
    sublocationSelect.innerHTML = '<option value="">Select Sub-location</option>';

    if (barangay && sublocations[barangay]) {
        sublocations[barangay].forEach(sub => {
            const option = document.createElement('option');
            option.value = sub;
            option.textContent = sub;
            sublocationSelect.appendChild(option);
        });
    }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const messages = document.querySelectorAll('.editprofile-message');
    messages.forEach(msg => {
        setTimeout(() => {
            msg.style.opacity = '0';
            msg.style.transform = 'translateX(50px)';
            setTimeout(() => msg.remove(), 500);
        }, 5000); // 5 seconds
    });
});
</script>
</body>
</html>
