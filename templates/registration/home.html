{% load static %}

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
<link rel="stylesheet" href="{% static 'css/theme/theme.css' %}">
<link rel="stylesheet" href="{% static 'css/registration/userhome.css' %}?v=4">

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Fade in cards on load
    const cards = document.querySelectorAll('.card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
            card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
    });

    // Add click effect to buttons
    const buttons = document.querySelectorAll('.btn-primary, .btn-secondary, .btn1-primary');
    buttons.forEach(btn => {
        btn.addEventListener('click', function() {
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 150);
        });
    });

    // Auto-hide messages after 5 seconds
    const messages = document.querySelectorAll('.alert');
    messages.forEach(msg => {
        setTimeout(() => {
            msg.style.transition = 'opacity 0.5s ease';
            msg.style.opacity = '0';
            setTimeout(() => msg.remove(), 500);
        }, 5000);
    });
});
</script>

{% block no_container %}

{% if messages %}
  <div class="message-container">
    {% for message in messages %}
      <div class="alert {{ message.tags }}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

<nav class="navbar">
  <div class="nav-left">
    <a href="#" class="logo-link">
      <img src="{% static 'images/Logo1.png' %}" alt="Skill Bridge Logo" class="logo">
    </a>
  </div>
  <div class="nav-right">
    <a href="#">Community</a>
    <a href="#">About Us</a>
    <a href="#">Job Hunt</a>
    <a>|</a>
    <a href="{% url 'index' %}" class="btn">Logout</a>
  </div>
</nav>

<!-- Dashboard Wrapper -->
<div class="dashboard-wrapper">

  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-left">
      <h2>Welcome back, {{ user.username }}!</h2>
    </div>
    <div class="welcome-right">
      <div class="quick-actions-inline">
        <a href="{% url 'list_jobs' %}" class="btn-primary"><i class="icon-job"></i> Browse Jobs</a>
        <a href="#" class="btn-secondary"><i class="icon-training"></i> Find Trainings</a>
      </div>
    </div>
  </div>

  <!-- Dashboard Grid -->
  <div class="parent">
  <div class="card profile-card">
  <div class="profile-header">
    <img src="{% static 'images/snoopy.png' %}" alt="Profile" class="profile-pic">
    <h4><strong>{{ user_profile.first_name }} {{ user_profile.last_name }}</strong></h4>
    <p class="user-role"><strong>Role:</strong> Resident</p>
  </div>

  <div class="profile-details">
    _______________________________
    <p><strong>Email:</strong> {{ user_profile.email }}</p>
    <p><strong>Contact:</strong> {{ user_profile.contact_number }}</p>
    <p><strong>Address:</strong> {{ user_profile.address }}</p>
    {#  <p><strong>Gender:</strong> {{ user_profile.gender }}</p>  #}
    <p><strong>Employment:</strong> {{ user_profile.employment_status }}</p>
    <p><strong>Verification:</strong> {{ user_profile.verification_status }}</p>
    <p><strong>Skills:</strong> {{ user_profile.skills }}</p>

    <div class="action-buttons">
      <br>
      <a href="{% url 'edit_profile' %}" class="btn1-primary">Update Profile</a>
    </div>
  </div>
</div>

<div class="card jobs-card">
      <h3>My Applied Jobs</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Job Title</th>
            <th>Status</th>
            <th>Date Applied</th>
          </tr>
        </thead>
        <tbody>
      {% if applied_jobs %}
      {% for app in applied_jobs %}
        <tr>
          <td>{{ app.job.title }}</td>
          <td>{{ app.application_status }}</td>
          <td>{{ app.date_applied|date:"M. d, Y, P" }}</td>
        </tr>
      {% endfor %}
      {% else %}
        <tr>
          <td colspan="3" class="empty-msg">No jobs applied yet.</td>
        </tr>
      {% endif %}
     </tbody>

      </table>
       <br><br><br><br><br><br><br><br>
    </div>

    <!-- Registered Trainings -->
    <div class="card trainings-card">
      <h3>My Registered Trainings</h3>
      <ul class="training-list">
        {% for training in registered_trainings %}
        <li>
          <span class="training-title">{{ training.training_name }}</span> - {{ training.status }}
          <br><small>{{ training.date_scheduled|date:"M. d, Y" }}</small>
        </li>
        {% empty %}
        <li>No trainings registered yet.</li>
        {% endfor %}
      </ul>
      <br><br><br><br><br><br><br><br>
    </div>

    <!-- Full Width Section -->
    <div class="card full-width-card">
      <h3>Announcements / Footer</h3>
      <p>Place optional content here.</p>
    </div>
  </div>

{% endblock %}
